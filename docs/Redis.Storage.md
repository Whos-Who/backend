# Redis Storage

Redis storage key-value pairings are as listed
<br/>

## Game State of a room / game

`roomCode` refers to the room code of the room, while `clientId` refers to the id generated by the client side, used to uniquely identify players

For more information regarding `PlayerState`, refer to the below section

The key-value pairings for the game state in Redis are as such:

```
room-<roomCode>:
  roomCode: string
  phase: string
  host: string
  currQuestion: string
  currAnswerer: string
  playerCount: number
  questionsLeft: number,
  selectedPlayerId: string,
  selectedAnswer: string,
  players: map<clientId,PlayerState>
```

### Description of data

- `roomCode` stores the room code of the game
- `phase` stores the current phase the game is in
- `host` stores the clientId of the host
- `currQuestion` stores the string of the current question
- `currAnswerer` stores the clientId of the player guessing in the guessing phase
- `playerCount` stores the number of players in the game
- `questionsLeft` stores the number of questions left in the game
- `selectedPlayerId` stores the clientId of the selected player in the guesing phase
- `selectedAnswer` stores the selected answer in the guessing phase

<br/>

## Player State for a player in game

The `players` attribute inside Game State is a map of clientIds to their player state within the game

The key-value pairings for PlayerState is as listed

```
{
  username: string
  connected: boolean
  score: number
  currAnswer: {
    value: string,
    isGuessed: boolean
  }
}
```

### Description of data

- `username` stores the username of the player
- `connected` stores the current connection status of the player
- `score` stores the current score of the player
- `currAnswer` stores 2 key-value pairs
  - `value` - the answer given by the current player
  - `isGussed` - whether the given answer has been guessed by someone else

<br/>

## Questions for a particular game

`roomCode` refers to the room code of the game

The key-value pairing for questions of a game are as follows:

```
questions-<roomCode>: List<string>
```

### Description of data

A list of questions (string), for the game with room code `roomId` is stored at the key `questions-<roomId>`

<br/>

## Guessing order for a particular game

`roomCode` refers to the room code of the game

The key-value pairing for the guessing order of a game are as follows:

```
guessing-order-<roomCode>: List<string>
```

### Description of data

A list of clientIds (string), representing the guessing order for the game with room code `roomId` is stored at the key `guessing-order-<roomId>`

<br/>

## Player Activity

`clientId` refers to the id generated by the client side, used to uniquely identify players

```
player-activity-<clientId>:
    socketId: string
    roomCode: string
```

### Description

- `socketId` stores the socketId used during the connection
- `roomCode` stores the room code of the game the player was last part of
